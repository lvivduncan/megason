// fork https://github.com/adnantopal/slimmenu
!function(j,m,g,h){function f(d,a){this.element=d,this.$elem=j(this.element),this.options=j.extend(k,a),this.init()}var c="slimmenu",b=0,k={resizeWidth:"776",initiallyVisible:!1,indentChildren:!1,expandIcon:"+",collapseIcon:"-"};f.prototype={init:function(){var o,p=j(m),n=this.options,e=this.$elem,d='<div class="menu-collapser"><div class="collapse-button"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></div></div>';e.before(d),o=e.prev(".menu-collapser"),e.on("click",".sub-toggle",function(l){l.preventDefault(),l.stopPropagation();var a=j(this).closest("li");j(this).hasClass("expanded")?(j(this).removeClass("expanded").html(n.expandIcon),a.find(">ul").slideUp()):(j(this).addClass("expanded").html(n.collapseIcon),a.find(">ul").slideDown())}),o.on("click",".collapse-button",function(a){a.preventDefault(),e.slideToggle()}),this.resizeMenu(),p.on("resize",this.resizeMenu.bind(this)),p.trigger("resize")},resizeMenu:function(){var n=this,e=j(m),a=e.width(),r=this.options,q=j(this.element),p=j("body").find(".menu-collapser");m.innerWidth!==h&&m.innerWidth>a&&(a=m.innerWidth),a!=b&&(b=a,q.find("li").each(function(){j(this).has("ul").length&&(j(this).addClass("has-submenu").has(".sub-toggle").length?j(this).children(".sub-toggle").html(r.expandIcon):j(this).addClass("has-submenu").append('<span class="sub-toggle">'+r.expandIcon+"</span>")),j(this).children("ul").hide().end().find(".sub-toggle").removeClass("expanded").html(r.expandIcon)}),r.resizeWidth>=a?(r.indentChildren&&q.find("ul").each(function(){var d=j(this).parents("ul").length;j(this).children("li").children("a").has("i").length||j(this).children("li").children("a").prepend(n.indent(d,r))}),q.addClass("collapsed").find("li").has("ul").off("mouseenter mouseleave"),p.show(),r.initiallyVisible||q.hide()):(q.find("li").has("ul").on("mouseenter",function(){j(this).find(">ul").stop().slideDown()}).on("mouseleave",function(){j(this).find(">ul").stop().slideUp()}),q.find("li > a > i").remove(),q.removeClass("collapsed").show(),p.hide()))},indent:function(l,o){for(var a=0,d="";l>a;a++){return d}}},j.fn[c]=function(a){return this.each(function(){j.data(this,"plugin_"+c)||j.data(this,"plugin_"+c,new f(this,a))})}}(jQuery,window,document);